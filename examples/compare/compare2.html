<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>compare2 æ€§èƒ½</title>
  <link rel="stylesheet" href="./compare2.css" />
  <script>
    (function (win, doc) {
      var docEl = document.documentElement;

      function setFont() {
        var cliWidth = docEl.clientWidth;
        if (cliWidth > 750) {
          cliWidth = 750;
        }
        docEl.style.fontSize = 100 * (cliWidth / 750) + "px";
      }
      win.addEventListener("resize", setFont, false);
      setFont();
    })(window, document);
  </script>
</head>

<body>
  <div class="mp-share">
    <div class="mps-content">
      <div class="mps-info">
        <div class="mpsi-img" style="
              background-image: url(https://pic2.zhimg.com/80/v2-c73649b7f792be2e8d3b3bfe7c6360fd_720w.jpeg);
            "></div>
        <div class="mpsi-text">
          <div>newbieyoungğŸ˜€</div>
          <div>åˆ†äº«3ä¸ªå¤§å®è´ç»™ä½ </div>
        </div>
      </div>
      <div class="mp-list no-btns">
        <div class="mpl-item">
          <div class="mpl-img">
            <img src="https://pic2.zhimg.com/80/v2-615d289fede62d4e714a35210397e184_720w.png" />
          </div>
          <div class="mpl-detail">
            <div class="mpl-title">
              <div class="mpl-tag">Simple-Crop</div>
              æ”¯æŒè£å‰ªå›¾ç‰‡ä»»æ„è§’åº¦æ—‹è½¬å…¨å¹³å°å›¾ç‰‡è£å‰ªç»„ä»¶
            </div>
            <div class="mpl-features">
              <div class="mpl-sales">ä»»æ„è§’åº¦æ—‹è½¬</div>
              <div>ä½“éªŒåª²ç¾å®¢æˆ·ç«¯</div>
            </div>
            <div class="mpl-info">
              <div class="mpl-save">
                star
                <div>230</div>
              </div>
            </div>
          </div>
        </div>
        <div class="mpl-item">
          <div class="mpl-img">
            <img src="https://pic4.zhimg.com/80/v2-b01d271772cccd9dcd2f139b32abd09e_720w.jpeg" />
          </div>
          <div class="mpl-detail">
            <div class="mpl-title">
              <div class="mpl-tag">å®å½“é­”æ–¹</div>
              é­”æ–¹æ–°æ‰‹è‡ªç ”ï¼Œå‡†å¤‡åŒ…å« N å¤šè¾…åŠ©åŠŸèƒ½çš„åŸºç¡€é­”æ–¹
            </div>
            <div class="mpl-features">
              <div class="mpl-sales">æ³¨å†Œç”¨æˆ·5k</div>
              <div>æ˜é‡‘å°å†ŒåŒ…æ•™åŒ…ä¼š</div>
            </div>
            <div class="mpl-info">
              <div class="mpl-save">
                star
                <div>112</div>
              </div>
            </div>
          </div>
        </div>
        <div class="mpl-item">
          <div class="mpl-img">
            <img src="https://pic1.zhimg.com/80/v2-738c26db234dbcb4c076b2103e2534df_720w.png" />
          </div>
          <div class="mpl-detail">
            <div class="mpl-title">
              <div class="mpl-tag">æ˜é‡‘å°å†Œ</div>
              åŸºäº ThreeJS æ¡†æ¶çš„é­”æ–¹å¾®ä¿¡å°æ¸¸æˆå®è·µ
            </div>
            <div class="mpl-features">
              <div class="mpl-sales">ä»0åˆ°1</div>
              <div>å®ç°ç‚«é…·é­”æ–¹å¾®ä¿¡å°æ¸¸æˆ</div>
            </div>
            <div class="mpl-info">
              <div class="mpl-save">
                å·²å”®
                <div>1000</div>
              </div>
              <div class="mpl-text">Â¥9.9</div>
            </div>
          </div>
        </div>
      </div>
      <div class="mps-end">
        <div class="mpse-qrcode">
          <img src="https://pic1.zhimg.com/80/v2-29a530f8c148668b9a2b746c7a5783ba_720w.png" />
        </div>
        <div class="mpse-text">
          <div>
            <div class="mpse-no">1</div>
            ä¿å­˜å›¾ç‰‡åˆ°ç›¸å†Œ
          </div>
          <div>
            <div class="mpse-no">2</div>
            æ‰‹æœºæ‰«ä¸€æ‰«å³å¯çœ‹è§
          </div>
        </div>
        <div class="mpse-logo">
          <div></div>
        </div>
      </div>
    </div>
  </div>

  <script src="./html2canvas.js"></script>
  <script src="./dom-to-image.js"></script>
  <script src="../../build/index-web.min.js"></script>
  <script>
    window.onload = function () {
      let $ele = document.querySelector('.mps-content');

      let t1 = window.performance.now();
      html2canvas($ele).then(function (canvas) {
        console.log('html2canvas');
        console.log(window.performance.now() - t1);
        document.body.appendChild(canvas);
      });

      let t2 = window.performance.now();
      domtoimage.toPng($ele).then(function (dataUrl) {
        console.log('dom-to-img');
        console.log(window.performance.now() - t2);
        let img = new Image();
        img.src = dataUrl;
        document.body.appendChild(img);
      })

      let imgType = "jpeg";
      let screenshot = new SimpleScreenshot({
        imgType: imgType, // å›¾ç‰‡ç±»å‹
        puppeteerServer: "https://dom2img.lione.me/simple-screenshot",
        puppeteerGlobalFont: "PingFang", // puppeteer æˆªå±æœåŠ¡å…¨å±€å­—ä½“
        devicePixelRatio: window.devicePixelRatio, // è®¾å¤‡åƒç´ æ¯”
        log: function (msg) {
          console.log(msg);
          console.log(msg.svg);
        },
        error: function (err) {
          console.log(err);
        },
      });
      let t3 = window.performance.now();
      screenshot.toIMG(".mps-content", function (img) {
        console.log('simple-screenshot');
        console.log(window.performance.now() - t3);
        img.canvas.style.width = img.canvas.width / window.devicePixelRatio + 'px';
        img.canvas.style.height = img.canvas.height / window.devicePixelRatio + 'px';
        document.body.appendChild(img.canvas);
      });
    };
  </script>
</body>

</html>